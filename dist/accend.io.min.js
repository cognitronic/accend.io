angular.module("accend.io.ui",[]),angular.module("accend.io.services",["accend.io.movie.service","accend.io.rest.service","accend.io.cache.service"]),angular.module("accend.io",["accend.io.ui","accend.io.services","ui.router","ui.bootstrap","ngAnimate","toaster"]).config(function($httpProvider,$stateProvider,$urlRouterProvider){$httpProvider.defaults.transformRequest=function(data){return void 0===data?data:$.param(data)},$httpProvider.defaults.useXDomain=!0,delete $httpProvider.defaults.headers.common["X-Requested-With"],$httpProvider.defaults.headers.put["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",$httpProvider.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",$httpProvider.defaults.headers["delete"]={"Content-Type":"application/json; charset=UTF-8"},$httpProvider.defaults.headers.get={"Content-Type":"text/plain; charset=UTF-8"},$urlRouterProvider.otherwise("/movies"),$stateProvider.state("movies",{url:"/movies",views:{"header@":{templateUrl:"/src/common/layout/header.html",controller:"HeaderController as hc"},"main-content@":{templateUrl:"src/movies/movies.html",controller:"MoviesController as mc"}}}).state("movies.details",{url:"/:title",views:{"header@":{templateUrl:"/src/common/layout/header.html",controller:"HeaderController as hc"},"main-content@":{templateUrl:"src/movie-details/movie-details.html",controller:"MovieDetailsController as mdc"}}})}),function(){"use strict";var BASE_API="http://www.myapifilms.com/";angular.module("accend.io").constant("Constants",{ROUTES:{GET_TOP_50:BASE_API+"imdb/top?format=JSON&start=1&end=50&data=F",GET_MOVIE_DETAILS:BASE_API+"imdb?idIMDB={0}&format=JSON&lang={1}&actors={2}&trailer={3}"},CACHE:{SELECTED_MOVIE:"selectedMovie"},TMD_KEY:"675f762710fb7e000524487344f12d0d",ROTTEN_TOMATOES:"yxf9m7meanv7edhtkzgpk4ue"})}(),function(){"use strict";var HeaderController=function(){function init(){}var hc=this;hc.init=init,init()};angular.module("accend.io").controller("HeaderController",[HeaderController])}(),function(){"use strict";var CacheService=function(){var _setItem=function(key,val){sessionStorage.setItem(key,JSON.stringify(val))},_getItem=function(item){return angular.fromJson?angular.fromJson(sessionStorage.getItem(item)):void 0},_removeItem=function(item){sessionStorage.removeItem(item)},_clearCache=function(){sessionStorage.clear()};return{setItem:_setItem,getItem:_getItem,removeItem:_removeItem,clearCache:_clearCache}};angular.module("accend.io.cache.service",[]).factory("CacheService",[CacheService])}(),function(){"use strict";var RestService=function($http,$q,$rootScope){var _buildUrl=function(url,argList){var finalURL=url;if(argList||argList==[])for(var replaceStr="",i=0;i<argList.length;i++)replaceStr="{"+i+"}",finalURL=finalURL.replace(replaceStr,argList[i]);return finalURL},_executeHttpRequest=function(method,url,urlReplaceList,params,successFunction,errorMsg,errorFunction,config){config&&config.hasOwnProperty("showLoader")&&($rootScope.showLoader=config.showLoader),urlReplaceList&&(url=_buildUrl(url,urlReplaceList)),$http({method:method,url:url,params:params,cache:!1}).success(function(data,status,headers,config){$rootScope.showLoader=!1,void 0===successFunction?_defaultSuccessFunction(data,status,headers,config):successFunction(data,status,headers,config)}).error(function(data,status,headers,config){$rootScope.showLoader=!1,0!==status&&_processError(data,status,headers,config,errorMsg,errorFunction)})},_defaultSuccessFunction=function(data){console.log("Successfully received data, no functionality defined to proccess it. ",data)},_processError=function(data,status,headers,config,errorMsg,errorFunction){errorMsg&&AlertService.addErrorMessage(errorMsg,!0),errorFunction&&errorFunction(data,status,headers,config)},_getData=function(url,urlReplaceList,params,successFunction,errorMsg,errorFunction,config){_executeHttpRequest("GET",url,urlReplaceList,params,successFunction,errorMsg,errorFunction,config)},_putData=function(url,urlReplaceList,params,successFunction,errorMsg,errorFunction,config){_executeHttpRequest("PUT",url,urlReplaceList,params,successFunction,errorMsg,errorFunction,config)},_deleteData=function(url,urlReplaceList,params,successFunction,errorMsg,errorFunction,config){_executeHttpRequest("DELETE",url,urlReplaceList,params,successFunction,errorMsg,errorFunction,config)},_putPostData=function(url,urlReplaceList,params,data,successFunction,errorMsg,errorFunction,config){config&&config.hasOwnProperty("showLoader")&&($rootScope.showLoader=config.showLoader),urlReplaceList&&(url=_buildUrl(url,urlReplaceList)),$http({method:"PUT",url:url,params:params,data:data,cache:!1}).success(function(postData,status,headers,config){$rootScope.showLoader=!1,void 0===successFunction?_defaultSuccessFunction(postData,status,headers,config):successFunction(data,status,headers,config)}).error(function(postData,status,headers,config){$rootScope.showLoader=!1,0!==status&&_processError(postData,status,headers,config,errorMsg,errorFunction)})},_postData=function(url,urlReplaceList,params,data,successFunction,errorMsg,errorFunction,config){config&&config.hasOwnProperty("showLoader")&&($rootScope.showLoader=config.showLoader),urlReplaceList&&(url=_buildUrl(url,urlReplaceList)),$http({method:"POST",url:url,params:params,data:data,cache:!1}).success(function(postData,status,headers,config){$rootScope.showLoader=!1,void 0===successFunction?_defaultSuccessFunction(postData,status,headers,config):successFunction(postData,status,headers,config)}).error(function(postData,status,headers,config){$rootScope.showLoader=!1,0!==status&&_processError(postData,status,headers,config,errorMsg,errorFunction)})};return{getData:_getData,postData:_postData,putData:_putData,deleteData:_deleteData,putPostData:_putPostData}};angular.module("accend.io.rest.service",[]).factory("RestService",["$http","$q","$rootScope",RestService])}(),function(){"use strict";var MovieDetailsController=function(MovieService,CacheService,$q,Constants,$state){function returnToList(){$state.go("movies")}function init(){mdc.getMovieByImdbId("id")}function getMovieByImdbId(){var serviceConfig={serviceCallParams:[1,50],showLoader:!0};MovieService.getMovieByImdbId($state.params.title.split(" ").join("-"),serviceConfig).then(function(data){mdc.movie=data})}var mdc=this;mdc.movie={},mdc.init=init,mdc.returnToList=returnToList,mdc.getMovieByImdbId=getMovieByImdbId,init()};angular.module("accend.io").controller("MovieDetailsController",["MovieService","CacheService","$q","Constants","$state",MovieDetailsController]),angular.module("accend.io").filter("trusted",["$sce",function($sce){return function(url){return $sce.trustAsResourceUrl(url)}}])}(),function(){"use strict";var MovieService=function(RestService,$q){var _getMovies=function(config){var deferred=$q.defer(),_success=function(data){deferred.resolve(data)},_error=function(data){deferred.resolve(data)};return RestService.getData("src/common/data/movie-data.json",null,null,_success,"",_error,config.showLoader),deferred.promise},_getMovieByImdbId=function(id,config){var deferred=$q.defer(),_success=function(data){deferred.resolve(data)},_error=function(data){deferred.resolve(data)};return"Interstellar"===id?RestService.getData("src/common/data/intersteller.json",null,null,_success,"",_error,config.showLoader):RestService.getData("src/common/data/pulp-fiction.json",null,null,_success,"",_error,config.showLoader),deferred.promise};return{getMovies:_getMovies,getMovieByImdbId:_getMovieByImdbId}};angular.module("accend.io.movie.service",[]).factory("MovieService",["RestService","$q","Constants","$http",MovieService])}(),function(){"use strict";var MoviesController=function(MovieService,$state,CacheService,Constants,$interval){function init(){CacheService.removeItem(Constants.CACHE.SELECTED_MOVIE),mc.getMovies()}function movieDetails(movie){CacheService.setItem(Constants.CACHE.SELECTED_MOVIE,movie),$state.go("movies.details",{title:movie.title,data:mc.movies[0]})}function getMovies(){var serviceConfig={serviceCallParams:[1,50],showLoader:!0};MovieService.getMovies(serviceConfig).then(function(data){mc.movies=data,console.log(data)})}var mc=this;mc.init=init,mc.getMovies=getMovies,mc.movieDetails=movieDetails,init(),$interval(function(){mc.getMovies()},6e4)};angular.module("accend.io").controller("MoviesController",["MovieService","$state","CacheService","Constants","$interval",MoviesController])}();